---
layout: post
title: Minor Issue and Resolution with BaseLdapPathAware
date: '2010-11-17T13:07:00.000-08:00'
author: Mark Corkery
tags:
- Programming
- BaseLdapPathAware
- Spring LDAP
modified_time: '2013-10-20T14:22:34.806-07:00'
blogger_id: tag:blogger.com,1999:blog-7218688161043116845.post-4356134330802676933
blogger_orig_url: http://markcorkery.blogspot.com/2010/11/minor-issue-and-resolution-with.html
---

In the last couple of weeks I've had an oppurtunity to work with version <a href="http://static.springsource.org/spring-ldap/site/">1.3 of Spring LDAP</a> and I'm eagerly awaiting the 1.3.1 update which I beleive is coming down the line in the next few weeks.<br/><br/>With one of the DAO objects I had created, I had a need to access the base DN. Normally you shouldn't have a need to do this, but I was trying to build up a uniqueMember string for adding a user into a group table and needed to create the full DN to the user including the baseDN. To access the base DN as defined in your appicationconext, you simply have to implement theÂ BaseLdapPathAware interface.<a name='more'></a><br/><br/>This is shown below:<br/><br/>[sourcecode language="java" wraplines="false" highlight="4,9,10,11,12"]<br/>@Service<br/>public class UserDAOImpl implements BaseDAO, BaseLdapPathAware, InitializingBean {<br/><br/>	private DistinguishedName baseDn;<br/><br/>	@Autowired<br/>	private LdapTemplate ldapTemplate;<br/><br/>	@Override<br/>	public void setBaseLdapPath(DistinguishedName suppliedBaseDn) {<br/>		this.baseDn = suppliedBaseDn;<br/>	}<br/><br/>	@Override<br/>	public void afterPropertiesSet() throws Exception {<br/>		Assert.notNull(baseDn, &quot;basePath must be set&quot;);<br/>		Assert.notNull(ldapTemplate, &quot;ldapTemplate must be set&quot;);<br/>	}<br/><br/>}<br/>[/sourcecode]<br/><br/>Then you will need to include the BaseLdapPathBeanPostProcessor bean definition into your applicationContext:<br/><br/>[sourcecode language="xml" wraplines="false" highlight="1"]<br/>	&lt;bean class=&quot;org.springframework.ldap.core.support.BaseLdapPathBeanPostProcessor&quot;/&gt;<br/><br/>    &lt;bean class=&quot;org.springframework.ldap.core.support.LdapContextSource&quot; id=&quot;contextSource&quot; &gt;<br/>    	&lt;property name=&quot;url&quot; value=&quot;${ldap.urls}&quot; /&gt;<br/>      	&lt;property name=&quot;base&quot; value=&quot;${ldap.base}&quot; /&gt;<br/>      	&lt;property name=&quot;userDn&quot; value=&quot;${ldap.userDn}&quot; /&gt;<br/>      	&lt;property name=&quot;password&quot; value=&quot;${ldap.password}&quot; /&gt;<br/>	&lt;/bean&gt;<br/><br/>	&lt;bean class=&quot;org.springframework.ldap.core.LdapTemplate&quot; id=&quot;ldapTemplate&quot;&gt;<br/>		&lt;constructor-arg ref=&quot;contextSource&quot; /&gt;<br/>	&lt;/bean&gt;<br/>[/sourcecode]<br/><br/>Unfortunately, when I started the application, I got a great big exception, the crux of which was the following:<br/><br/>[sourcecode language="java" wraplines="true"]<br/>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoFactoryImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.kramkroc.dao.UserDAOImpl com.kramkroc.dao.DaoFactoryImpl.userDao; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDAOImpl' defined in file [/data/workspaces/stsworkspaces/versioned_applications_workspace/com.kramkroc/target/classes/com/kramkroc/dao/UserDAOImpl.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'More than BaseLdapPathSource implementation definition found in current ApplicationContext' is defined<br/>[/sourcecode]<br/><br/>When I googled the error <strong>No bean named 'More than BaseLdapPathSource implementation definition found in current ApplicationContext' is defined</strong> I got nothing to lead to a solution. However, after reading the following <a href="http://static.springsource.org/spring-ldap/site/reference/html/configuration.html">section on the Spring LDAP user guide</a>, I updated the applicationContext to pass the contextSource into the BaseLdapPathBeanPostProcessor:<br/><br/>[sourcecode language="xml" wraplines="false" highlight="2"]<br/>	&lt;bean class=&quot;org.springframework.ldap.core.support.BaseLdapPathBeanPostProcessor&quot;&gt;<br/>		&lt;property name=&quot;baseLdapPathSourceName&quot; value=&quot;contextSource&quot;/&gt;<br/>	&lt;/bean&gt;<br/><br/>    &lt;bean class=&quot;org.springframework.ldap.core.support.LdapContextSource&quot; id=&quot;contextSource&quot; &gt;<br/>    	&lt;property name=&quot;url&quot; value=&quot;${ldap.urls}&quot; /&gt;<br/>      	&lt;property name=&quot;base&quot; value=&quot;${ldap.base}&quot; /&gt;<br/>      	&lt;property name=&quot;userDn&quot; value=&quot;${ldap.userDn}&quot; /&gt;<br/>      	&lt;property name=&quot;password&quot; value=&quot;${ldap.password}&quot; /&gt;<br/>	&lt;/bean&gt;<br/><br/>	&lt;bean class=&quot;org.springframework.ldap.core.LdapTemplate&quot; id=&quot;ldapTemplate&quot;&gt;<br/>		&lt;constructor-arg ref=&quot;contextSource&quot; /&gt;<br/>	&lt;/bean&gt;<br/>[/sourcecode]<br/><br/>I found this to be puzzling as I have only one LdapContextSource defined, but hey, it fixed my problem :)